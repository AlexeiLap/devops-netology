
# Домашнее задание к занятию "5.3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"


## Задача 1
https://badcode.ru/docker-tutorial-dlia-novichkov-rassmatrivaiem-docker-tak-iesli-by-on-byl-ighrovoi-pristavkoi/

Сценарий выполения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберете любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html><head>Hey, Netology</head><body><h1>I’m DevOps Engineer!</h1></body></html>
```
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

ОТВЕТ:
- docker pull nginx - скачал образ nginx
- сделал докер файл на базе образа -
```
FROM nginx
RUN echo '<html><head>Hey, Netology</head><body><h1>I’m DevOps Engineer!</h1></body></html>' > /usr/share/nginx/html/index.html
```
- создал свой fork образа `docker build . -f Dockerfile.txt --tag alexeilapshov/netology:mynginx`
- отправил его в репозиторий `docker push alexeilapshov/netology:mynginx`
- ссылка на образ
https://hub.docker.com/layers/191774164/alexeilapshov/netology/mynginx/images/sha256-a6face50de7f1561c8b97aad2efdc04e3432fc15770580f6212189cfaa501ecc?context=repo
- запускается командой `docker run -d -p 8080:80 mynginx`
- загруженный контейнер (скриншот)
![Скриншот](img/5-3/загруженный%20контейнер.png)


## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
"Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? 
Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.
--
Сценарий:
- Высоконагруженное монолитное java веб-приложение - физическая машина поскольку высокие нагрузки и требуется максимальная производительность и надежность;
- Nodejs веб-приложение - Docker контейнер - поскольку требуются зависимости;
- Мобильное приложение c версиями для Android и iOS - контейнеры, серверную часть один контейнер, приложения отдельные контейнеры которые будут взаимодействовать с серверным контейнером;
- Шина данных на базе Apache Kafka - Docker контейнер - поскольку требуется изоляция приложения;
- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana - Docker контейнеры отдельные для каждого компонента;
- Мониторинг-стек на базе Prometheus и Grafana - виртуальная машина поскольку требуются задачи мониторинга;
- MongoDB, как основное хранилище данных для java-приложения - физическая машина для основного хранения нужна максимальная надежность и безопасность;
- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry - виртуальная машина.

## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тэгом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```;
- Добавьте еще один файл в папку ```/data``` на хостовой машине;
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.

ОТВЕТ:
```commandline
docker run -dit -P --name centos-test -v C:/mynginx/hostdata:/hostdata centos -запустил первый контейнер и подключил папку
docker run -dit -P --name debian-test -v C:/mynginx/hostdata:/hostdata debian -запустил второй контейнер и подключил папку
добавил файл на первой машине echo 'testdata' > testfile.txt
добавил файл на хостовой машине - 
листинг файлов на второй машине контейнера -
```
![Скриншот](img/5-3/листингфайлов%20на%20второй%20машине.png)


## Задача 4 (*)

Воспроизвести практическую часть лекции самостоятельно.
Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.

ОТВЕТ:
https://hub.docker.com/layers/191778520/alexeilapshov/netology/ansible2.9.24/images/sha256-b68d82c6fcfbc1799599c8969d08e4d9cd4248fc02a731b74e52d99661bca4b8?context=repo
---