# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде - ВЫБИРАЕМ Документоориентированную или ключ-значение (ключ делаем идентификатором)
- Склады и автомобильные дороги для логистической компании - ВЫБИРАЕМ Реляционные, поскольку нужно связи между объектами
- Генеалогические деревья - ВЫБИРАЕМ Иерархическую
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации - ВЫБИРАЕМ NoSql - key-value хранилище, которое имеет механизм Pub/Sub
- Отношения клиент-покупка для интернет-магазина - ВЫБИРАЕМ Реляционные, поскольку нужно связи между объектами 

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись) - AP - противоречивые данные будут 2 часа
- При сетевых сбоях, система может разделиться на 2 раздельных кластера - CA - не выполняется условие устойчивости к разделению
- Система может не прислать корректный ответ или сбросить соединение - CP - не выполняется условие доступности данных

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?
- Данные записываются на все узлы с задержкой до часа (асинхронная запись) - AP - противоречивые данные будут 2 часа Latency будет не обеспечиваться 2 часа
- При сетевых сбоях, система может разделиться на 2 раздельных кластера - CA - не выполняется условие устойчивости к разделению Latency будет обеспечиваться
- Система может не прислать корректный ответ или сбросить соединение - CP - не выполняется условие доступности данных Latency будет обеспечиваться


## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Модель ACID более требовательная и реализуется в реляционных БД,
модель BASE не выполняет все требования ACID и реализуется в NoSql БД.
ACID - обеспечивает надежность и согласованность данных и внутренние проверки и контроль.
BASE - обеспечивает большую скорость работы.

Принципы несовместимы поскольку ACID ориентирована на целостность базы и зависимость ее частей, а 
BASE ориентирована на работу с отдельным частями и узлами вне зависимости от остальных компонентов.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

ОТВЕТ:

Это система основанная по механизме подписки:
- Основной бизнес-процесс в нашей системе может выглядеть так:
- Подписчики подписываются на сообщение.
- Издатель создает сообщение.
- Издатель публикует сообщение в нашей системе.
- Сообщение какое-то время хранится в системе.
- Система отправляет сообщение всем подписчикам.
- Подписчики принимают сообщение.
- Подписчики обрабатывают сообщение.

Используются два механизма: Подписчик запрашивает очередное сообщение сам (poll), либо система оповещает подписчика о новом сообщении (push).

Для key-value подходит Redis
Redis вообще-то не pub-sub система, а key-value data storage. Но он на удивление хорошо реализует классический pub-sub и 
показывает замечательную производительность.
Вы можете установить Redis локально или как распределенный сервис. Вы можете добавить возможность сохранения сообщений на диск.

Минусы системы зависят от ее реализации для реальных задач насколько она подходит или нет и правильно ли была реализована для всех 
участников информационного обмена.

---